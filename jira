/////jenkin on ec2///

sudo apt update -y
sudo apt upgrade -y
sudo apt install openjdk-17-jdk -y

sudo mkdir -p /etc/apt/keyrings
sudo wget -O /etc/apt/keyrings/jenkins-keyring.asc \
  https://pkg.jenkins.io/debian-stable/jenkins.io-2026.key

echo "deb [signed-by=/etc/apt/keyrings/jenkins-keyring.asc] \
  https://pkg.jenkins.io/debian-stable binary/" | sudo tee \
  /etc/apt/sources.list.d/jenkins.list > /dev/null

sudo apt update

sudo apt install jenkins -y

sudo systemctl start jenkins
sudo systemctl enable jenkins
sudo systemctl status jenkins


///// docker on ec2/////
sudo apt update
sudo apt install docker.io -y
sudo systemctl start docker
sudo systemctl enable docker
sudo docker --version
sudo docker build -t 24p1329/app25:latest .
sudo docker images
sudo docker login
sudo docker push 24p1329/app25:latest
sudo docker pull 24p1329/1pp25:latest 24p1329/html25:latest
 sudo docker run -d -p 80:80 24p1329/html25:latest(for checking html)
sudo docker ps
curl http://localhost(index file)
check(on browser with public ip)
 chack in docker hub

///dockerfile for java
FROM openjdk:17-jdk-slim
WORKDIR /app
COPY hello.java .
RUN javac hello.java
CMD ["java", "hello"]


///dockerfile for static file
FROM nginx:latest
COPY index.html /usr/share/nginx/html/index.html
EXPOSE 80

pipeline {
    agent any

    stages {
        stage('Hello') {
            steps {
                echo "Hello! Jenkins Pipeline is working."
            }
        }

        stage('Build') {
            steps {
                echo "This is the build step."
            }
        }

        stage('Test') {
            steps {
                echo "Running tests... (just demo)"
            }
        }

        stage('Done') {
            steps {
                echo "Pipeline finished successfully!"
            }
        }
    }
}

# Use Nginx to serve static HTML
FROM nginx:alpine

# Remove default Nginx static files
RUN rm -rf /usr/share/nginx/html/*

# Copy our index.html to Nginx folder
COPY index.html /usr/share/nginx/html/index.html

# Expose port 80
EXPOSE 80

# Start Nginx
CMD ["nginx", "-g", "daemon off;"]
